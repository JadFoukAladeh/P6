
<!--

  Written by:   Jared Hochstenbach
  Date:         2024-05-31
  Purpose:      The purpose of this HTML page is to act as a weekly logbook for Project VI and to document weekly work accomplished.
!-->
<!DOCTYPE html> 
<html lang="en">
<head>
  <!-- Website title that will be shown on the tab in the browser (not shown on page in browser)-->
  <title>  Project VI - Logbook </title>
  <hr/> </hr> <!-- Recall the <hr/> tag draws a horizontal line-->
  <link href="css/general_style.css" type="text/css" rel="stylesheet" />

</head>
<body>
  <!-- This will be the title of the page (shown in browser) !-->
  <h1> Project VI - Logbook - Jared Hochstenbach</h1>
  <hr/> </hr> <!-- Recall the <hr/> tag draws a horizontal line-->

  <!-- This will be the title of the table of contents (shown in browser) !-->
  <h2> Table of Contents</h2>
  <hr/> </hr> <!-- Recall the <hr/> tag draws a horizontal line-->

  <!-- This will be the contents of the table of contents (shown in browser as an ordered list) !-->
  <ol> <!-- Recall <ol> means ordered list, which means it'll count from 1 onwards-->

    <li> <a href="#week1">  Week 1</a></li>
    <li> <a href="#week2">  Week 2</a></li>
    <li> <a href="#week3">  Week 3</a></li>
    <li> <a href="#week4">  Week 4</a></li>
    <li> <a href="#week5">  Week 5</a></li>
    <li> <a href="#week6">  Week 6</a></li>
    <li> <a href="#week7">  Week 7</a></li>
    <li> <a href="#week8">  Week 8</a></li>
    <li> <a href="#week9">  Week 9</a></li>
    <li> <a href="#week10"> Week 10</a></li>
    <li> <a href="#week11"> Week 11</a></li>
    <li> <a href="#week12"> Week 12</a></li>
    <li> <a href="#week13"> Week 13</a></li>
    <li> <a href="#week14"> Week 14</a></li>
    
  </ol>

  <hr/> </hr> <!-- Recall the <hr/> tag draws a horizontal line-->

  <!-- This will be the subheading Week 1. This will be shown in browser !-->
  <h2 id="week1"> Week 1 </h2> <!-- Recall the <id> tag will move the user to a particular point on the page -->


  <!-- This will be the unordered list (point form) of everything accomplished during week 1-->
  <ul> <!-- Recall the <ul> tag stands for unordered list, which will create a list using point form-->

    <li> Installed VScode on ubuntu virtual machine</li>
    <li> Installed VScode required extensions </li>
    <li> Installed XAMPP on ubuntu virtual machine. XAMPP was set to startup on boot</li>
    <li> Installed STM32 cube IDE to program STM32F303RE for Project VI </li>
    <li> Setup a local server that can be reached through localhost (on virtual machine) or IP address (when on same wifi network as host): 192.168.2.55. 
         The local server can be found in /var/www/html directory on the virtual machine. This is the default XAMPP deployment folder
    </li>
    <li> Setup github connection with partner and was able to create a branch and merge with the main thread</li>
    <li> Obtained contact information for partner and setup communication through discord server</li>
    <li> Reviewed the wiring diagram for the elevator </li>
  </ul>

  <hr/> </hr> <!-- Recall the <hr/> tag draws a horizontal line-->
  <!-- This will be the subheading Week 2. This will be shown in browser !-->
  <h2 id="week2"> Week 2 </h2> <!-- Recall the <id> tag will move the user to a particular point on the page -->


    <!-- This will be the unordered list (point form) of everything accomplished during week 2-->
    <ul> <!-- Recall the <ul> tag stands for unordered list, which will create a list using point form-->
  
      <li> met with partner to discuss project in first project meeting</li>
      <li> planned added feature for project</li>
      <li> started rough 3D design of elevator door module</li>
      <li> started flow chart for new code for elevator door modules and controls</li>
      <li> discussed and agreed upon project plan with partner</li>
      <li> modified project server to allow for both logbooks to be accessable on server in seperate links</li>
      <li> started planning for braile buttons for the elevator controls</li>
      <li> planned rough layout for the GUI for the elevator control scheme</li>
      <li> completed weekly status report with partner</li>
      <li> consulted with partner on testing plan and our ideas towards what needed to be tested</li>
      <li> connected over to team project website hosted on the Rpi and verified that it worked</li>
      <li> performed seventh commit to the project which added features including individual logbook pages and an added submenu</li>
      <li>pushed seventh commit to the repository</li>
      <li>created project plan page and basic project plan template. still have not populated it</li>
    </ul>
    <hr/> </hr>
    <h2 id="week3"> Week 3 </h2>

    <ul>
      <li>completed phase 1 of the Hal hand out on setting up the GPIO</li>
      <li>met with partner and disscussed Debriefing 1 and made plans for how to improve</li>
      <li>discussed plans for the button panel and decided that the physical button panel was something Jad would be handling himself </li>
      <li>worked on implementing phase 2 of the gpio set up</li>
      <li>worked on setting up css in class following demo</li>
      <li>tested CAN GPIO stage 1 code and got it working</li>
      <li>issue with the stage 1 code ended up being forgetting to hit resume after entering the debugger</li>
      <li>begun working on stage 2 of the CAN GPIO code</li>
      <li>pushed stage 1 code to the github</li>
      <li></li>
      <li>plan for next week is to work on the next stage of the code and set up the filters</li>
      <li>also plan to implement code to call the elevator to each floor during the next week</li>

    </ul>
    <hr/>
    <h2 id="week4"> Week 4</h2>

    <ul>
      <li>met with Jad on monday to discuss plans for project for this week</li>
      <li>modified demo code to feature the external buttons and the different floors</li>
      <li>got code to compile with the added features and tried to upload it to the nucleos on Tuesday</li>
      <li>was able to upload the code to the top nucleo and the bottom 2 but the second from the top wouldn't connect to my computer</li>
      <li>noticed the nucleo looked damaged so met with Dave and Jad on Wednesday to replace it.</li>
      <li>week was not very productive on project as I am in the middle of a family emergancy</li>
      <li>discovered I had not changed the ID from the supervisory controller ID and I made the change to correspond with the proper ID values for each floor node</li>
      <li>Friday morning I learned that the RPi was giving a bunch of can errors. Dave was working on the elevator after that and at time of writing I am not sure what is wrong with the elevator</li>
      <li>if possible going to try and upload the new code to the nucleos and test it using the blue buttons to see if the RPi keeps giving the error. another option would be to have a group with working code upload their code and see what happens</li>
      <li>I have not heard from Jad since Wednesday and I am not sure what he has done and if any of it caused the issue</li>
      <li>uploaded new code to elevator nucleos. currently only using blue button on each elevator.</li>
      <li>went through arduino code to understand what was going on a bit more</li>
      <li>realized issue with elevator was just the code not being correct for the nucleos</li>
      <li>discussed with Jad all the work he did to the website</li>
      <li>tested elevator to make sure the correct value was being displayed on the LCD</li>
      <li>discussed the plans for the push buttons going forward.</li>
      <li>going to continue to try and reflash the code for floor 3 to the third floor nucleo. as currently floor 3 goes to floor 2 and floor 2 goes to floor 3</li>


    </ul>
    <hr/>
  <h2 id="week5"> Week 5</h2>
   <ul>
    <li>tested external buttons for each floor using the blue shield for the nucleo</li>
    <li>discovered I had the buttons wrong, first I had the second floor and third floors reversed so I fixed that in the code.</li>
    <li>also fixed the leds so they were all for the correct floors</li>
    <li>discovered that the response time was not consistant for the buttons and sometimes the buttons take a while to respond</li>
    <li>pushed updated nucleo code to the git so that it is </li>
    <li>holding the buttons on the blue shield works better than just pressing them</li>
    <li>helped record demo video of the elevator working with the external buttons</li>
    <li>met with Jad to discuss all changes done to the project</li>
  </ul>
  <h2 id="week6"> Week 6</h2>
  <ul>
    <li>begun work on developing 3D assembly for door module</li>
    <li>determined we would use a 2 segment door which would reduce the size of the overall unit when the door is open.</li>
    <li>the inner of the 2 segments of the door will be connected to a lead screw which will move it along the door frame.</li>
    <li>the outer segment will be pulled by a set of tongues on the back of the inner module, this will allow it to only be moved when the inner module pushes against it</li>
    <li>at the moment the plan is to use a pair of limit switches to detect when the door is in the closed or open position.</li>
    <li>when the door open limit switch is pressed, an interrupt will be triggered that will start a countdown, if a button is pressed then the door may close sooner, bt otherwise the door will remain open until the countdown is complete and after that the door will close and wait for another input</li>
    <li>while the door is open floor requests will be stored in a queue or database waiting for the door to close for them to be processed</li>
    <li>if one of the floor request buttons is pressed, the countdown will advance to 5 seconds and then the door will close allowing the elevator to go to that floor</li>
    <li>will either use the RPi or the arduino to control the door motor</li>
    <li>met with Jad to discuss all changes done to the project</li>
    <img src="Images/doormodule.png" alt="door module" title="door module" width ="250"/><br />
    
  </ul>
  <h2 id="week7"> Week 7</h2>
  <ul>
    <li>on tuesday I met with Jad to discuss the progress on the project. he had fixed the 2 broken buttons on the 2 blue boards but now we were having an issue where nothing was working</li>
    <li>I looked at the CAN bus and found that the DB9 port for the arduino had broke and was not actually connected to the board. </li>
    <li>Jad worked on replacing it and on friday when we got to work on it I found that one of the wires connected to the arduino was disconnected. I plugged it back in based on the wires from the next elevator</li>
    <li>Worked more on design file for the door. added a frame and adjusted the tolerances so that the door will not get stuck but will also not rattle around</li>
    <li>did not get as much done this week as I hoped because we had 2 midterms to study for</li>
    <li>I am planning on continuing to work on project over reading week</li>
    <li>over reading week I am planning on working on the wiring for the door module to enable it to work properly
      
    </li>
  </ul>

  <h2 id="week9"> Week 9</h2>
  <ul>
    <li>continued working on design for the opening elevator doors</li>
    <li>decided to use the lead screw and Z axis components from an Ender 3 3D printer as the motor and controls for the opening and closing of the doors</li>
    <li>I was going to use the limit switches and stepper motor circuitry from project 4 but because of how the floor nodes are set up I am going to need to set up a seperate limit switch circuit mounted on a bread board as a solution</li>
    <li>I also plan on repurposing code used in project 4 and modifying it so that the door is controlled by the floor update signal sent to the car controller node.</li>
    <li>did not get as much done this week as I hoped because we had 2 midterms to study for</li>
    <li>the reason I need a new limit switch circuit is because PC5 is in use with the lights on the blue board, and it was also the pin used in the past for the limit switch. as such I am going to rebuild the circuit for it using spare parts and connect it to PC7</li>
    <li>one of my ideas was to mount the limit switch under the door so that as the door closes it would close the switch. I decided against this as it would be easier to just mount them at the ends of travel as wiring and operation will be simpler</li>
    <li>the last part of the design of the housing is including a mounting point for the motor, and working on the weight distribution as it is very front heavy</li>
  </ul>

  <h2 id="week10"> Week 10</h2>
  <ul>
    <li>Attempted printing door module but discovered I had made it too large for my printer. it originally would have been about 20cmx40cm in the base</li>
    <li>Since that would be too large for my 30x30x30 cm printer, I decided to try cutting the frame in half. this did not work and the print failed early on</li>
    <li>I did not get much time to work on it because I was studying for the math midterm but on Thursday night I scaled down the module so it would be printable</li>
    <li>An unfortunate side effect of the scaling was that I didn't properly adjust some of the walls and I ended up with a 4cm thick wall in one spot</li>
    <li>During the debriefing the print is almost done and should be done by 4 pm on June 12 2024</li>
    <li>begun debugging the code and and set up GPIO pins for the 2 limit switches and the 4 pins for the stepper motor</li>
    <li>Jad is sick this week so I have not had a chance to meet with him yet and see what he has done</li>

  </ul>

  <h2 id="week11"> Week 11</h2>
  <ul>
    <li>finished print for the elevator body</li>
    <li>tested motor control for the stepper motor on the control boards</li>
    <li>discovered connector issue with the stepper cable</li>
    <li>tried printing door for the door module but it failed twice. going to attempt to print it again over the weekend</li>
    <li>Jad did not show up for debriefing again this week so I am planning to work on getting as much as I can for phase 2 working as I can over the weekend and coming week</li>
    <li>told Jad to push whatever he has done working or not to the Github in order to provide me with an update on where we are at</li>
    <li>Scheduled to have a Zoom meeting with Jad on saturday so he can show what we have working</li>
    <li>going to take what he has done and start working on it myself to try and get the rest done myself.</li>
    <li>beginning to go over all the database stuff in order to get it all working on my own incase jad has nothing</li>
  </ul>

  <h2 id="week12"> Week 12</h2>
  <ul>
    <li>after last fridays debrief I tried contacting Jad to arrange a meeting between us so we could discuss where we were on the project</li>
    <li>also insisted that he upload whatever he had to the github so I could see what we were working with</li>
    <li>Saturday evening we were supposed to have a meeting to discuss it but Saturday morning Jad asked for it to be rescheduled to Sunday evening. I agreed and that evening he did help with the thermodynamics lab</li>
    <li>Sunday we were supposed to have a meeting, Jad still had not sent any of his stuff from the past 2 weeks to me and I still had no idea if he had done anything. Sunday night he missed the meeting and asked to reschedule it to Monday morning</li>
    <li>Monday morning Jad did not show up and when he replied to text messages he agreed to a Zoom meeting that evening. I scheduled the meeting right after and sent him periodic reminders all day but that evening at the time of the meeting he did not show and did not send a text to ask to reschedule.</li>
    <li>after Jad did not show up I sent an email to Michael and Ali asking for a 1 week extension in order to give myself more time to work on the databases and finishing up phase 2</li>
    <li>Tuesday morning I went in to begin working on the databases and to see if there was anything on the Rpi that could help</li>
    <li>used Michael's example code as a start point and worked on getting it working so that I could control the database from the website</li>
    <li>found one line of code 'if(authenticated) {...}' was supposed to be 'if(authenticated = TRUE) {...}' and once i fixed that the code worked and I was able to manipulate the database from the website</li>
    <li>tested this by adding to the database on the website and in the terminal and it showed the added data on both ends.</li>
    <li>I saw Jad in Advanced Math on Tuesday but we did not talk</li>
    <li>Wednesday morning Ali emailed me approving my 1 week extension.</li>
    <li>Saw Jad on Thursday in Advanced Math but at this point I was sure he had not done anything towards the project in phase 2 and was focused on working solo.</li>
    <li>friday morning worked on fixing the CAN communication</li>
    <li>I had narrowed the issue down to the CAN bus not making contact between the arduino and the Rpi</li>
    <li>Michael jumped in to help and he discovered that there was an issue with the pcan driver on the Rpi</li>
    <li>Michael reinstalled it and we tested it and found that it worked once the driver had been reinstalled</li>
    <li>for next week</li>
    <li>plan on doing the diagnostics and the sabath mode along with audio for the floor indicators, and also finishing up anything else for phase 2 and working on my door module as my added feature</li>
  </ul>
</body>
<!-- &copy; adds the copyright symbol-->
<p> Copyright &copy; Jared Hochstenbach - 2024 </p>
</html>
